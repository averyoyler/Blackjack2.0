let baseDeck = [

    // HEARTS

    aceOfHearts = {
        name: 'Ace of Hearts',
        value: 'Ace',
        image: `<img src="images/AH.jpg" alt="Ace of Hearts">`
    },
    twoOfHearts = {
        name: "Two of Hearts",
        value: 'Two',
        image: `<img src="images/2H.jpg" alt="Two of Hearts">`
    },
    threeOfHearts = {
        name: "Three of Hearts",
        value: 'Three',
        image: `<img src="images/3H.jpg" alt="Three of Hearts">`
    },
    fourOfHearts = {
        name: "Four of Hearts",
        value: 'Four',
        image: `<img src="images/4H.jpg" alt="Four of Hearts">`
    },
    fiveOfHearts = {
        name: "Five of Hearts",
        value: 'Five',
        image: `<img src="images/5H.jpg" alt="Five of Hearts">`
    },
    sixOfHearts = {
        name: "Six of Hearts",
        value: 'Six',
        image: `<img src="images/6H.jpg" alt="Six of Hearts">`
    },
    sevenOfHearts = {
        name: "Seven of Hearts",
        value: 'Seven',
        image: `<img src="images/7H.jpg" alt="Seven of Hearts">`
    },
    eightOfHearts = {
        name: "Eight of Hearts",
        value: 'Eight',
        image: `<img src="images/8H.jpg" alt="Eight of Hearts">`
    },
    nineOfHearts = {
        name: "Nine of Hearts",
        value: 'Nine',
        image: `<img src="images/9H.jpg" alt="Nine of Hearts">`
    },
    jackOfHearts = {
        name: "Jack of Hearts",
        value: 'Jack',
        image: `<img src="images/JH.jpg" alt="Jack of Hearts">`
    },
    tenOfHearts = {
        name: "Ten of Hearts",
        value: 'Ten',
        image: `<img src="images/10H.jpg" alt="Ten of Hearts">`
    },
    queenOfHearts = {
        name: "Queen of Hearts",
        value: 'Queen',
        image: `<img src="images/QH.jpg" alt="Queen of Hearts">`
    },
    kingOfHearts = {
        name: "King of Hearts",
        value: 'King',
        image: `<img src="images/KH.jpg" alt="King of Hearts">`
    },

    // DIAMONDS

    aceOfDiamonds = {
        name: 'Ace of Diamonds',
        value: 'Ace',
        image: `<img src="images/AD.jpg" alt="Ace of Diamonds">`
    },
    twoOfDiamonds = {
        name: "Two of Diamonds",
        value: 'Two',
        image: `<img src="images/2D.jpg" alt="Two of Diamonds">`
    },
    threeOfDiamonds = {
        name: "Three of Diamonds",
        value: 'Three',
        image: `<img src="images/3D.jpg" alt="Three of Diamonds">`
    },
    fourOfDiamonds = {
        name: "Four of Diamonds",
        value: 'Four',
        image: `<img src="images/4D.jpg" alt="Four of Diamonds">`
    },
    fiveOfDiamonds = {
        name: "Five of Diamonds",
        value: 'Five',
        image: `<img src="images/5D.jpg" alt="Five of Diamonds">`
    },
    sixOfDiamonds = {
        name: "Six of Diamonds",
        value: 'Six',
        image: `<img src="images/6D.jpg" alt="Six of Diamonds">`
    },
    sevenOfDiamonds = {
        name: "Seven of Diamonds",
        value: 'Seven',
        image: `<img src="images/7D.jpg" alt="Seven of Diamonds">`
    },
    eightOfDiamonds = {
        name: "Eight of Diamonds",
        value: 'Eight',
        image: `<img src="images/8D.jpg" alt="Eight of Diamonds">`
    },
    nineOfDiamonds = {
        name: "Nine of Diamonds",
        value: 'Nine',
        image: `<img src="images/9D.jpg" alt="Nine of Diamonds">`
    },
    tenOfDiamonds = {
        name: "Ten of Diamonds",
        value: 'Ten',
        image: `<img src="images/10D.jpg" alt="Ten of Diamonds">`
    },
    jackOfDiamonds = {
        name: "Jack of Diamonds",
        value: 'Jack',
        image: `<img src="images/JD.jpg" alt="Jack of Diamonds">`
    },
    queenOfDiamonds = {
        name: "Queen of Diamonds",
        value: 'Queen',
        image: `<img src="images/QD.jpg" alt="Queen of Diamonds">`
    },
    kingOfDiamonds = {
        name: "King of Diamonds",
        value: 'King',
        image: `<img src="images/KD.jpg" alt="King of Diamonds">`
    },

    // CLUBS

    aceOfClubs = {
        name: 'Ace of Clubs',
        value: 'Ace',
        image: `<img src="images/AC.jpg" alt="Ace of Clubs">`
    },
    twoOfClubs = {
        name: "Two of Clubs",
        value: 'Two',
        image: `<img src="images/2C.jpg" alt="Two of Clubs">`
    },
    threeOfClubs = {
        name: "Three of Clubs",
        value: 'Three',
        image: `<img src="images/3C.jpg" alt="Three of Clubs">`
    },
    fourOfClubs = {
        name: "Four of Clubs",
        value: 'Four',
        image: `<img src="images/4C.jpg" alt="Four of Clubs">`
    },
    fiveOfClubs = {
        name: "Five of Clubs",
        value: 'Five',
        image: `<img src="images/5C.jpg" alt="Five of Clubs">`
    },
    sixOfClubs = {
        name: "Six of Clubs",
        value: 'Six',
        image: `<img src="images/6C.jpg" alt="Six of Clubs">`
    },
    sevenOfClubs = {
        name: "Seven of Clubs",
        value: 'Seven',
        image: `<img src="images/7C.jpg" alt="Seven of Clubs">`
    },
    eightOfClubs = {
        name: "Eight of Clubs",
        value: 'Eight',
        image: `<img src="images/8C.jpg" alt="Eight of Clubs">`
    },
    nineOfClubs = {
        name: "Nine of Clubs",
        value: 'Nine',
        image: `<img src="images/9C.jpg" alt="Nine of Clubs">`
    },
    tenOfClubs = {
        name: "Ten of Clubs",
        value: 'Ten',
        image: `<img src="images/10C.jpg" alt="Ten of Clubs">`
    },
    jackOfClubs = {
        name: "Jack of Clubs",
        value: 'Jack',
        image: `<img src="images/JC.jpg" alt="Jack of Clubs">`
    },
    queenOfClubs = {
        name: "Queen of Clubs",
        value: 'Queen',
        image: `<img src="images/QC.jpg" alt="Queen of Clubs">`
    },
    kingOfClubs = {
        name: "King of Clubs",
        value: 'King',
        image: `<img src="images/KC.jpg" alt="King of Clubs">`
    },

    // SPADES

    aceOfSpades = {
        name: 'Ace of Spades',
        value: 'Ace',
        image: `<img src="images/AS.jpg" alt="Ace of Spades">`
    },
    twoOfSpades = {
        name: "Two of Spades",
        value: 'Two',
        image: `<img src="images/2S.jpg" alt="Two of Spades">`
    },
    threeOfSpades = {
        name: "Three of Spades",
        value: 'Three',
        image: `<img src="images/3S.jpg" alt="Three of Spades">`
    },
    fourOfSpades = {
        name: "Four of Spades",
        value: 'Four',
        image: `<img src="images/4S.jpg" alt="Four of Spades">`
    },
    fiveOfSpades = {
        name: "Five of Spades",
        value: 'Five',
        image: `<img src="images/5S.jpg" alt="Five of Spades">`
    },
    sixOfSpades = {
        name: "Six of Spades",
        value: 'Six',
        image: `<img src="images/6S.jpg" alt="Six of Spades">`
    },
    sevenOfSpades = {
        name: "Seven of Spades",
        value: 'Seven',
        image: `<img src="images/7S.jpg" alt="Seven of Spades">`
    },
    eightOfSpades = {
        name: "Eight of Spades",
        value: 'Eight',
        image: `<img src="images/8S.jpg" alt="Eight of Spades">`
    },
    nineOfSpades = {
        name: "Nine of Spades",
        value: 'Nine',
        image: `<img src="images/9S.jpg" alt="Nine of Spades">`
    },
    tenOfSpades = {
        name: "Ten of Spades",
        value: 'Ten',
        image: `<img src="images/10S.jpg" alt="Ten of Spades">`
    },
    jackOfSpades = {
        name: "Jack of Spades",
        value: 'Jack',
        image: `<img src="images/JS.jpg" alt="Jack of Spades">`
    },
    queenOfSpades = {
        name: "Queen of Spades",
        value: 'Queen',
        image: `<img src="images/QS.jpg" alt="Queen of Spades">`
    },
    kingOfSpades = {
        name: "King of Spades",
        value: 'King',
        image: `<img src="images/KS.jpg" alt="King of Spades">`
    },
];

let deck = [];

// DOM Variables
let textArea = document.getElementById('text-area');
let newGameButton = document.getElementById('new-game-button');
let hitButton = document.getElementById('hit-button');
let stayButton = document.getElementById('stay-button');

// Game Variables
let gameStarted = false,
    gameOver = false,
    playerWon = false,
    dealerCards = [],
    playerCards = [],
    dealerScore = 0,
    playerScore = 0;


hitButton.style.display = 'none';
stayButton.style.display = 'none';
showStatus();

newGameButton.addEventListener('click', function(){
    gameStarted = true;
    gameOver = false;
    playerWon = false;

    cloneDeck();
    shuffleDeck(deck);
    dealerCards = [getNextCard(), getNextCard()];
    playerCards = [getNextCard(), getNextCard()];

    newGameButton.style.display = 'none';
    hitButton.style.display = 'inline';
    stayButton.style.display = 'inline';
    showStatus();
});

hitButton.addEventListener('click', function(){
    playerCards.push(getNextCard());
    checkForEndOfGame();
    showStatus();
});

stayButton.addEventListener('click', function(){
    gameOver = true;
    checkForEndOfGame();
    showStatus();
});

function cloneDeck() {
    for(let i = 0; i < baseDeck.length; i++){
        deck[i] = baseDeck[i];
    }
}

function getCardString(card){
    // return card.name + card.image;
    return card.image;
}

function shuffleDeck(deck){
    for(let i = 0; i < deck.length; i++){
        let swapIndex = Math.trunc(Math.random() * deck.length);
        let temp = deck[swapIndex];
        deck[swapIndex] = deck[i];
        deck[i] = temp;
    }
}

function getNextCard(){
    return deck.shift();
}

function getCardNumericValue(card){
    switch(card.value){
        case 'Ace':
            return 1;
        case 'Two':
            return 2;
        case 'Three':
            return 3;
        case 'Four':
            return 4;
        case 'Five':
            return 5;
        case 'Six':
            return 6;
        case 'Seven':
            return 7;
        case 'Eight':
            return 8;
        case 'Nine':
            return 9;
        default:
            return 10;
    }
}

function getScore(cardArray){
    let score = 0;
    let hasAce = false;
    for(let i = 0; i < cardArray.length; i++){
        let card = cardArray[i];
        score += getCardNumericValue(card);
        if (card.value === 'Ace'){
            hasAce = true;
        }
    }
    if(hasAce && score + 10 <= 21){
        return score + 10;
    }
    return score;
}

function updateScores(){
    dealerScore = getScore(dealerCards);
    playerScore = getScore(playerCards);
}

function checkForEndOfGame() {
    updateScores();

    if(gameOver){
        // let dealer take cards
        while(dealerScore < playerScore
        && playerScore <= 21
        && dealerScore <= 21){
            dealerCards.push(getNextCard());
            updateScores();
        }
    }
    if (playerScore > 21){
        playerWon = false;
        gameOver = true;
    }
    else if(dealerScore > 21){
        playerWon = true;
        gameOver = true;
    }
    else if(gameOver){
        if(playerScore > dealerScore){
            playerWon = true;
        }
        else{
            playerWon = false;
        }
    }
}

function showStatus(){
    if(!gameStarted) {
        textArea.innerHTML = 'Welcome to Blackjack';
        return;
    }

    let dealerCardString = '';
    for(let i = 0; i < dealerCards.length; i++){
        dealerCardString += getCardString(dealerCards[i]);
    }

    let playerCardString = '';
    for(let i = 0; i < playerCards.length; i++){
        playerCardString += getCardString(playerCards[i]);
    }

    updateScores();

    // Display Shuffled Deck
    // for(let i = 0; i < deck.length; i++){
    //     textArea.innerHTML += '\n' + getCardString(deck[i]);
    // }

    textArea.innerHTML =
        'Dealer has:' + '<br>' +
        dealerCardString + '<br>' +
        '(score: ' + dealerScore + ')' + '<br><br>' +

        'Player has:' + '<br>' +
        playerCardString + '<br>' +
        '(score: ' + playerScore + ')';
    if(gameOver) {
        if(playerWon) {
            textArea.innerHTML += '<br>' + 'YOU WIN!';
        }
        else {
            textArea.innerHTML += '<br>' + 'DEALER WINS';
        }
        newGameButton.style.display = 'inline';
        hitButton.style.display = 'none';
        stayButton.style.display = 'none';
    }
}

$('#new-game-button').click(() => {
    $('html, body').animate({
        scrollTop: $('#text-area').offset().top
    }, 200);
});



//
// let cardDisplay = $('#cardDisplay');
//
// function displayCard(){
//     cardDisplay.html(deck[0].image);
// }